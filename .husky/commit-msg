#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Allow skipping commit message validation
if [ "$SKIP_COMMIT_MSG" = "true" ]; then
  echo "â© Skipping commit message validation"
  exit 0
fi

# Run commit message validation with a timeout to prevent hanging
npx commitlint --edit "$1" || {
  echo "âŒ Commit message does not follow conventional commit format."
  echo "ğŸ’¡ Format: type(scope): message"
  echo "ğŸ’¡ Example: feat(auth): add login functionality"
  echo "ğŸ’¡ To skip this check, use: SKIP_COMMIT_MSG=true git commit"
  exit 1
} 